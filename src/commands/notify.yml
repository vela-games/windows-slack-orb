description: >
  Notify a Slack channel with a custom message from Windows environment.

parameters:
  text:
    default: ""
    type: string
  mentions:
    default: ""
    type: string
  channel:
    default: "$SLACK_DEFAULT_CHANNEL"
    type: string
  token:
    default: "$SLACK_ACCESS_TOKEN"
    type: string
steps:
  - run:
      environment:
        SLACK_PARAM_TEXT: << parameters.text >>
        SLACK_PARAM_MENTIONS: << parameters.mentions >>
        SLACK_PARAM_CHANNEL: << parameters.channel >>
        SLACK_PARAM_TOKEN: << parameters.token >>
      name: Slack - send notification
      command: <<include(scripts/send.ps1)>>
